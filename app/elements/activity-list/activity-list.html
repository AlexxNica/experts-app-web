<!--
  Google Developers Experts Tracking App
  Copyright (C) 2016  by the GDE Tracking App Team

  gdetracking.appspot.com/
  https://github.com/GoogleDeveloperExperts/experts-app-web

  This program is free software: you can redistribute it and/or modify
  it under the terms of the GNU General Public License as published by
  the Free Software Foundation, either version 3 of the License, or
  (at your option) any later version.

  This program is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  GNU General Public License for more details.

  You should have received a copy of the GNU General Public License
  along with this program.  If not, see <http://www.gnu.org/licenses/>
-->
<dom-module id="activity-list">
  <template>
    <!-- Prepare elements to access the API -->
    <discovery-api-elements
      name    = "gdetracking"
      version = "v1.0b2"
      app-id  = "omega-keep-406"
      no-client>
    </discovery-api-elements>

    <!-- Fetch information about currently signed-in User -->
    <gdetracking-activity_record-list
      gplus_id  = "[[userId]]"
      auto$     = "[[_hasUserId(userId)]]"
      response  = "{{apiRecords}}">
    </gdetracking-activity_record-list>

    <template 
      is    = "dom-repeat" 
      items = "[[apiRecords.items]]">
      <a href="[[_editUrl(item.id)]]">
        [[item.activity_title]]
      </a><br>
    </template>
  </template>

  <script>
    (function() {
      Polymer({
        is          :  'activity-list',
        properties  : {
          userId      : String,
        },
        _hasUserId  : function (userId) {
          return !!userId;
        },
        _editUrl    : function (id) {
          return '/activity/' + id;
        }
      });
    })();
  </script>
</dom-module>
